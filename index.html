<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>WebGIS Data OPD</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <style>
    #map { height: 100vh; width: 100%; }
  </style>
</head> 
<body>
  <div id="map"></div>

  <script>
    // 1️⃣ Inisialisasi peta
    const map = L.map('map').setView([-8.5, 119.9], 10); // sesuaikan koordinat awal

    // 2️⃣ Tambah basemap
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19,
      attribution: '&copy; OpenStreetMap'
    }).addTo(map);

    // 3️⃣ Ambil data dari Google Apps Script
    fetch("https://script.google.com/macros/s/AKfycbyKBHseSt8bdyO05fUw52Nzs6sGJ18tIkTvl2FfTKz2Ey0TKiW2hxJu4i_z7Ur7-doP/exec")
      .then(res => res.text())
  .then(text => {
    const json = JSON.parse(text.substr(47).slice(0, -2));
    const rows = json.table.rows;

    rows.forEach(r => {
      const nama = r.c[0]?.v;
      const umur = r.c[1]?.v;
      console.log(nama, umur);
    });
  });
      .catch(err => console.error(err));
  </script>
</body>
</html>
