<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>WebGIS Data OPD</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <style>
    #map { height: 100vh; width: 100%; }
  </style>
</head>
<body>
  <div id="map"></div>

  <script>
    // 1️⃣ Inisialisasi peta
    const map = L.map('map').setView([-8.5, 119.9], 10); // sesuaikan koordinat awal

    // 2️⃣ Tambah basemap
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19,
      attribution: '&copy; OpenStreetMap'
    }).addTo(map);

    // 3️⃣ Ambil data dari Google Apps Script
    fetch("https://script.google.com/macros/s/AKfycbyr1234abcdEfGhiJKlmNopQrsTuVwxyz/exec")
      .then(res => res.json())
      .then(data => {
        // Misal data = [{nama:"Kantor A", lat:-8.5, lon:119.9}, ...]
        data.forEach(d => {
          L.marker([d.lat, d.lon]).addTo(map)
            .bindPopup(`<b>${d.nama}</b>`);
        });
      })
      .catch(err => console.error(err));
  </script>
</body>
</html>
